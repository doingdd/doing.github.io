---
layout: post
title: Python IO 文件处理
category: Python
---

### 本文列举了python中常用的文件操作。

首先弄清两个基本概念“模式”，“操作(或方法)”
python对文件的使用都基于一个前提，就是文件被打开，只有被打开的文件才能进行下一步操作。
所以 **“模式”** 就是文件的打开模式，也就是说在文件被打开的时候就需要决定我要对文件做什么，从而选择正确的模式。  
**“操作”** 就是对文件想要执行的内容，读，写，既读又写等等。
个人感觉仅对文件的操作没有shell那么简便，当然也许是还没有体会到它的强大。

# 1. 文件打开模式

open函数中模式参数的常用值：

值 |描述
---|---
'r'|读模式
'w'|写模式
'a'|追加模式
'b'|二进制模式（可与其他模式共用）
'+'|读/写模式（可与其他模式共用）

### 'r'模式
只读，不可写，为默认模式。
### 'w'模式
只写，不可读，文件不存在则创建，存在则清空。
### 'a'模式
追加写，不可读，不存在会创建，存在则追加。
### 'b'模式
可以处理二进制文件，例如声音或者图像文件，愿意是文本模式打开非文本文件可能会对文件进行修改，如换行符等，破坏二进制文件。
'b'模式可以与其他模式一起用
### '+'模式
可读可写，与不同的模式公用有不同的作用：
**'r+'与'w+'的区别：** r+可读可写，如果不存在则报错；w+可读可写，如果不存在则创建，存在则清空。
**'r+'与'a+'的区别：** r+如果进行写操作，默认从文件的开始写，会覆盖原文件内容； a+则从文件末尾追加。
**NOTE:** 
* 普通的读写操作加上加号以后，相当于只加入了“可读可写”的功能，原功能实际没有变化。  
* w和w+模式的清空文件操作，等于只要使用w或w+文件内容肯定是要被清空的。这一点类似于shell的'>'
* a和a+的追加模式，写操作可以理解为shell的'>>'		  

# 2. 文件的方法
文件的基本方法就是open(),close(),read(),write(),readline(),readlines(),writelines(),seek()等等
## 读
**read([size])**  

	>>> f = open('file.test','w')
	>>> f.write('1\n2\n3\n4')
	>>> f.seek(0)
	>>> print f.read()
	1
	2
	3
	4
	>>> f.seek(0)
	>>>> f.read()
	'1\n2\n3\n4'

注意两点：  
1.f.read()是从文件当前指针读取内容直到文件末尾也就是EOF结束，如果在write之后不加seek改变指针位置，读出来的**内容为空**。
2.read()的返回值是一个字符串，只不过print函数自动把换行符"\n"转换成换行，实际上，print会转换原始字符串成易读的状态。
  
	>>> print 1000L
	1000

Question: in python help(file), don't know what this mean, what's non-blocking mode:  
`Notice that when in non-blocking mode, less data than what was requested may be returned, even if no size parameter was given.
`